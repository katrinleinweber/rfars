<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Download raw data from the Fatality Analysis Reporting System and prepare it for research.">
<title>Download and Analyze Fatal Crash Data • rfars</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Download and Analyze Fatal Crash Data">
<meta property="og:description" content="Download raw data from the Fatality Analysis Reporting System and prepare it for research.">
<meta property="og:image" content="https://s87jackson.github.io/rfars/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">rfars</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/Crash_sequences.html">Crash Sequences</a>
    <a class="dropdown-item" href="articles/Rural_roads.html">Rural Roads</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/s87jackson/rfars/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="rfars-">rfars <a class="anchor" aria-label="anchor" href="#rfars-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of <code>rfars</code> is to facilitate transportation safety analysis by simplifying the process of extracting data from official crash databases. The <a href="https://www.nhtsa.gov/" class="external-link">National Highway Traffic Safety Administration</a> collects and publishes a census of fatal crashes in the <a href="https://www.nhtsa.gov/research-data/fatality-analysis-reporting-system-fars" class="external-link">Fatality Analysis Reporting System</a> and a sample of fatal and non-fatal crashes in the <a href="https://www.nhtsa.gov/crash-data-systems/crash-report-sampling-system" class="external-link">Crash Report Sampling System</a> (an evolution of the <a href="https://www.nhtsa.gov/national-automotive-sampling-system/nass-general-estimates-system" class="external-link">General Estimates System</a>). The <a href="https://cdan.dot.gov/query" class="external-link">Fatality and Injury Reporting System Tool</a> allows users to query these databases, and can produce simple tables and graphs. This suffices for simple analysis, but often leaves researchers wanting more. Digging any deeper, however, involves a time-consuming process of downloading annual ZIP files and attempting to stitch them together - after first combing through immense data dictionaries to determine the required variables and table names.</p>
<p><code>rfars</code> allows users to download FARS and GES/CRSS data back to 2011 with just one line of code. The result is a full, rich dataset ready for mapping, modeling, and other downstream analysis. Helper functions are also provided to produce common counts and comparisons.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the latest version of <code>rfars</code> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"s87jackson/rfars"</span><span class="op">)</span></span></code></pre></div>
<p>or the CRAN stable release with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rfars"</span><span class="op">)</span></span></code></pre></div>
<p>Then load rfars and some helpful packages:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/s87jackson/rfars" class="external-link">rfars</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/leaflet/" class="external-link">leaflet</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bhaskarvk/leaflet.extras" class="external-link">leaflet.extras</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-and-using-fars-data">Getting and Using FARS Data<a class="anchor" aria-label="anchor" href="#getting-and-using-fars-data"></a>
</h2>
<p>Use the <code><a href="reference/get_fars.html">get_fars()</a></code> function to bring FARS data into the current environment and optionally save an RDS file for future use (faster than downloading anew). This is done by (a) downloading the data to a temporary directory, (b) downloading to a permanent directory, or (c) importing from a permanent directory. After data is downloaded to a permanent directory, the function will look there rather than downloading the data again. If a year of data is requested but not found, R will ask your permission to download the missing data.</p>
<p>Here we get three years of data for Virginia:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myFARS</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_fars.html">get_fars</a></span><span class="op">(</span>years <span class="op">=</span> <span class="fl">2019</span><span class="op">:</span><span class="fl">2021</span>, states <span class="op">=</span> <span class="st">"VA"</span><span class="op">)</span></span></code></pre></div>
<p>This returns a ‘FARS’ object: a list with six tibbles: <code>flat</code>, <code>multi_acc</code>, <code>multi_veh</code>, <code>multi_per</code>, <code>events</code>, and <code>codebook</code>.</p>
<p>The <code>flat</code> tibble contains all variables for which there is just one value per crash (“accident”), vehicle, or person (e.g., weather conditions, travel speed, age). Each row corresponds to a person involved in a crash. As there may be multiple people and/or vehicles involved in one crash, some variable-values are repeated within a crash or vehicle. Each crash is uniquely identified with <code>id</code>, which is a combination of <code>year</code> and <code>st_case</code>. Note that <code>st_case</code> is not unique across years, for example, <code>st_case</code> 510001 will appear in each year. The <code>id</code> variable attempts to avoid this issue.</p>
<p>Please review the <a href="https://crashstats.nhtsa.dot.gov/Api/Public/ViewPublication/813417" class="external-link">FARS Analytical User’s Manual</a> for more information.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">myFARS</span><span class="op">$</span><span class="va">flat</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 5,465</span></span>
<span><span class="co">#&gt; Columns: 199</span></span>
<span><span class="co">#&gt; $ year          &lt;dbl&gt; 2019, 2019, 2019, 2019, 2019, 2019, 2019, 2019, 2019, 20…</span></span>
<span><span class="co">#&gt; $ state         &lt;chr&gt; "Virginia", "Virginia", "Virginia", "Virginia", "Virgini…</span></span>
<span><span class="co">#&gt; $ st_case       &lt;dbl&gt; 510001, 510001, 510002, 510002, 510003, 510003, 510004, …</span></span>
<span><span class="co">#&gt; $ id            &lt;dbl&gt; 2019510001, 2019510001, 2019510002, 2019510002, 20195100…</span></span>
<span><span class="co">#&gt; $ veh_no        &lt;dbl&gt; 0, 1, 1, 2, 1, 1, 0, 1, 1, 1, 2, 0, 1, 1, 1, 2, 0, 1, 1,…</span></span>
<span><span class="co">#&gt; $ per_no        &lt;dbl&gt; 1, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ county        &lt;dbl&gt; 760, 760, 137, 137, 53, 53, 107, 107, 175, 175, 175, 157…</span></span>
<span><span class="co">#&gt; $ city          &lt;dbl&gt; 2060, 2060, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19…</span></span>
<span><span class="co">#&gt; $ lon           &lt;dbl&gt; -77.48444, -77.48444, -77.94240, -77.94240, -77.66604, -…</span></span>
<span><span class="co">#&gt; $ lat           &lt;dbl&gt; 37.50924, 37.50924, 38.19840, 38.19840, 37.00784, 37.007…</span></span>
<span><span class="co">#&gt; $ acc_type      &lt;chr&gt; NA, "C13-Single Driver-Forward Impact-Pedestrian/ Animal…</span></span>
<span><span class="co">#&gt; $ age           &lt;chr&gt; "17 Years", "42 Years", "83 Years", "44 Years", "50 Year…</span></span>
<span><span class="co">#&gt; $ air_bag       &lt;chr&gt; "Not a Motor Vehicle Occupant", "Reported as Deployment …</span></span>
<span><span class="co">#&gt; $ alc_det       &lt;chr&gt; "Not Reported", "Not Reported", "Not Reported", "Not Rep…</span></span>
<span><span class="co">#&gt; $ alc_res       &lt;chr&gt; "0.000 % BAC", "Test Not Given", "0.000 % BAC", "Test No…</span></span>
<span><span class="co">#&gt; $ alc_status    &lt;chr&gt; "Test Given", "Test Not Given", "Test Given", "Test Not …</span></span>
<span><span class="co">#&gt; $ arr_hour      &lt;chr&gt; "Unknown EMS Scene Arrival Hour", "Unknown EMS Scene Arr…</span></span>
<span><span class="co">#&gt; $ arr_min       &lt;chr&gt; "Unknown EMS Scene Arrival Minutes", "Unknown EMS Scene …</span></span>
<span><span class="co">#&gt; $ atst_typ      &lt;chr&gt; "Blood", "Test Not Given", "Blood", "Test Not Given", "T…</span></span>
<span><span class="co">#&gt; $ bikecgp       &lt;chr&gt; "Not a Cyclist", NA, NA, NA, NA, NA, "Not a Cyclist", NA…</span></span>
<span><span class="co">#&gt; $ bikectype     &lt;chr&gt; "Not a Cyclist", NA, NA, NA, NA, NA, "Not a Cyclist", NA…</span></span>
<span><span class="co">#&gt; $ bikedir       &lt;chr&gt; "Not a Cyclist", NA, NA, NA, NA, NA, "Not a Cyclist", NA…</span></span>
<span><span class="co">#&gt; $ bikeloc       &lt;chr&gt; "Not a Cyclist", NA, NA, NA, NA, NA, "Not a Cyclist", NA…</span></span>
<span><span class="co">#&gt; $ bikepos       &lt;chr&gt; "Not a Cyclist", NA, NA, NA, NA, NA, "Not a Cyclist", NA…</span></span>
<span><span class="co">#&gt; $ body_typ      &lt;chr&gt; NA, "4-door sedan, hardtop", "2-door sedan,hardtop,coupe…</span></span>
<span><span class="co">#&gt; $ bus_use       &lt;chr&gt; NA, "Not a Bus", "Not a Bus", "Not a Bus", "Not a Bus", …</span></span>
<span><span class="co">#&gt; $ cargo_bt      &lt;chr&gt; NA, "Not Applicable (N/A)", "Not Applicable (N/A)", "Not…</span></span>
<span><span class="co">#&gt; $ cdl_stat      &lt;chr&gt; NA, "No (CDL)", "No (CDL)", "No (CDL)", "No (CDL)", "No …</span></span>
<span><span class="co">#&gt; $ cityname      &lt;chr&gt; "RICHMOND", "RICHMOND", "NOT APPLICABLE", "NOT APPLICABL…</span></span>
<span><span class="co">#&gt; $ countyname    &lt;chr&gt; "RICHMOND (760)", "RICHMOND (760)", "ORANGE (137)", "ORA…</span></span>
<span><span class="co">#&gt; $ day           &lt;dbl&gt; 1, 1, 2, 2, 3, 3, 4, 4, 7, 7, 7, 6, 6, 6, 6, 6, 7, 7, 6,…</span></span>
<span><span class="co">#&gt; $ day_week      &lt;chr&gt; "Tuesday", "Tuesday", "Wednesday", "Wednesday", "Thursda…</span></span>
<span><span class="co">#&gt; $ death_da      &lt;chr&gt; "1", "Not Applicable (Non-Fatal)", "2", "Not Applicable …</span></span>
<span><span class="co">#&gt; $ death_hr      &lt;chr&gt; "6:00-6:59", "Not Applicable (Non-fatal)", "15:00-15:59"…</span></span>
<span><span class="co">#&gt; $ death_mn      &lt;chr&gt; "32", "Not Applicable (Non-fatal)", "35", "Not Applicabl…</span></span>
<span><span class="co">#&gt; $ death_mo      &lt;chr&gt; "January", "Not Applicable (Non-Fatal)", "January", "Not…</span></span>
<span><span class="co">#&gt; $ death_tm      &lt;chr&gt; NA, "Not Applicable (Non-fatal)", NA, "Not Applicable (N…</span></span>
<span><span class="co">#&gt; $ death_yr      &lt;chr&gt; "2019", "Not Applicable (Non-fatal)", "2019", "Not Appli…</span></span>
<span><span class="co">#&gt; $ deaths        &lt;dbl&gt; NA, 0, 1, 0, 1, 1, NA, 0, 1, 1, 0, NA, 0, 1, 1, 0, NA, 0…</span></span>
<span><span class="co">#&gt; $ deformed      &lt;chr&gt; NA, "Reported as Unknown", "Disabling Damage", "Disablin…</span></span>
<span><span class="co">#&gt; $ doa           &lt;chr&gt; "Not Applicable", "Not Applicable", "Died at Scene", "No…</span></span>
<span><span class="co">#&gt; $ dr_drink      &lt;chr&gt; NA, "No", "No", "No", "No", "No", NA, "Yes", "No", "No",…</span></span>
<span><span class="co">#&gt; $ dr_hgt        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ dr_pres       &lt;chr&gt; NA, "Yes", "Yes", "Yes", "Yes", "Yes", NA, "Yes", "Yes",…</span></span>
<span><span class="co">#&gt; $ dr_wgt        &lt;chr&gt; NA, "160 lbs.", "220 lbs.", "220 lbs.", "170 lbs.", "170…</span></span>
<span><span class="co">#&gt; $ dr_zip        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ drinking      &lt;chr&gt; "Not Reported", "Reported as Unknown", "No (Alcohol Not …</span></span>
<span><span class="co">#&gt; $ drug_det      &lt;chr&gt; "Not Reported", "Not Reported", "Not Reported", "Not Rep…</span></span>
<span><span class="co">#&gt; $ drugs         &lt;chr&gt; "Reported as Unknown", "Reported as Unknown", "No (drugs…</span></span>
<span><span class="co">#&gt; $ drunk_dr      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ dstatus       &lt;chr&gt; "Test Given", "Test Not Given", "Test Given", "Test Not …</span></span>
<span><span class="co">#&gt; $ ej_path       &lt;chr&gt; "Ejection Path Not Applicable", "Ejection Path Not Appli…</span></span>
<span><span class="co">#&gt; $ ejection      &lt;chr&gt; "Not Applicable", "Not Ejected", "Not Ejected", "Not Eje…</span></span>
<span><span class="co">#&gt; $ emer_use      &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ extricat      &lt;chr&gt; "Not Extricated or Not Applicable", "Not Extricated or N…</span></span>
<span><span class="co">#&gt; $ fatals        &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ fire_exp      &lt;chr&gt; NA, "No or Not Reported", "No or Not Reported", "No or N…</span></span>
<span><span class="co">#&gt; $ first_mo      &lt;chr&gt; NA, "October", "No Record", "No Record", "No Record", "N…</span></span>
<span><span class="co">#&gt; $ first_yr      &lt;chr&gt; NA, "2016", "No Record", "No Record", "No Record", "No R…</span></span>
<span><span class="co">#&gt; $ func_sys      &lt;chr&gt; "Principal Arterial - Other", "Principal Arterial - Othe…</span></span>
<span><span class="co">#&gt; $ gvwr          &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ harm_ev       &lt;chr&gt; "Pedestrian", "Pedestrian", "Motor Vehicle In-Transport"…</span></span>
<span><span class="co">#&gt; $ haz_cno       &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ haz_id        &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ haz_inv       &lt;chr&gt; NA, "No", "No", "No", "No", "No", NA, "No", "No", "No", …</span></span>
<span><span class="co">#&gt; $ haz_plac      &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ haz_rel       &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ helm_mis      &lt;chr&gt; "Not a Motor Vehicle Occupant", "None Used/Not Applicabl…</span></span>
<span><span class="co">#&gt; $ helm_use      &lt;chr&gt; "Not a Motor Vehicle Occupant", "Not Applicable", "Not A…</span></span>
<span><span class="co">#&gt; $ hispanic      &lt;chr&gt; "Non-Hispanic", "Not A Fatality (not Applicable)", "Non-…</span></span>
<span><span class="co">#&gt; $ hit_run       &lt;chr&gt; NA, "Yes", "No", "No", "No", "No", NA, "No", "No", "No",…</span></span>
<span><span class="co">#&gt; $ hosp_hr       &lt;chr&gt; "Unknown", "Unknown", "Unknown", "Unknown", "Unknown", "…</span></span>
<span><span class="co">#&gt; $ hosp_mn       &lt;chr&gt; "Unknown EMS Hospital Arrival Time", "Unknown EMS Hospit…</span></span>
<span><span class="co">#&gt; $ hospital      &lt;chr&gt; "EMS Unknown Mode", "Not Transported", "Not Transported"…</span></span>
<span><span class="co">#&gt; $ hour          &lt;chr&gt; "5:00am-5:59am", "5:00am-5:59am", "3:00pm-3:59pm", "3:00…</span></span>
<span><span class="co">#&gt; $ impact1       &lt;chr&gt; NA, "12 Clock Point", "12 Clock Point", "12 Clock Point"…</span></span>
<span><span class="co">#&gt; $ inj_sev       &lt;chr&gt; "Fatal Injury (K)", "No Apparent Injury (O)", "Fatal Inj…</span></span>
<span><span class="co">#&gt; $ j_knife       &lt;chr&gt; NA, "Not an Articulated Vehicle", "Not an Articulated Ve…</span></span>
<span><span class="co">#&gt; $ l_compl       &lt;chr&gt; NA, "Valid license for this class vehicle", "Valid licen…</span></span>
<span><span class="co">#&gt; $ l_endors      &lt;chr&gt; NA, "No Endorsements required for this vehicle", "No End…</span></span>
<span><span class="co">#&gt; $ l_restri      &lt;chr&gt; NA, "Restrictions, Compliance Unknown", "No Restrictions…</span></span>
<span><span class="co">#&gt; $ l_state       &lt;chr&gt; NA, "Virginia", "Virginia", "Virginia", "Virginia", "Vir…</span></span>
<span><span class="co">#&gt; $ l_status      &lt;chr&gt; NA, "Valid", "Valid", "Valid", "Valid", "Valid", NA, "Va…</span></span>
<span><span class="co">#&gt; $ l_type        &lt;chr&gt; NA, "Full Driver License", "Full Driver License", "Full …</span></span>
<span><span class="co">#&gt; $ lag_hrs       &lt;chr&gt; NA, "Unknown", NA, "Unknown", "Unknown", NA, NA, "Unknow…</span></span>
<span><span class="co">#&gt; $ lag_mins      &lt;chr&gt; NA, "Unknown", NA, "Unknown", "Unknown", NA, NA, "Unknow…</span></span>
<span><span class="co">#&gt; $ last_mo       &lt;chr&gt; NA, "March", "No Record", "No Record", "No Record", "No …</span></span>
<span><span class="co">#&gt; $ last_yr       &lt;chr&gt; NA, "2018", "No Record", "No Record", "No Record", "No R…</span></span>
<span><span class="co">#&gt; $ lgt_cond      &lt;chr&gt; "Dark - Lighted", "Dark - Lighted", "Daylight", "Dayligh…</span></span>
<span><span class="co">#&gt; $ location      &lt;chr&gt; "Not at Intersection - On Roadway, Not in Marked Crosswa…</span></span>
<span><span class="co">#&gt; $ m_harm        &lt;chr&gt; NA, "Pedestrian", "Motor Vehicle In-Transport", "Motor V…</span></span>
<span><span class="co">#&gt; $ mak_mod       &lt;chr&gt; NA, "Chevrolet Malibu/Malibu Maxx", "Pontiac Grand AM", …</span></span>
<span><span class="co">#&gt; $ make          &lt;chr&gt; NA, "Chevrolet", "Pontiac", "Toyota", "Chevrolet", "Chev…</span></span>
<span><span class="co">#&gt; $ man_coll      &lt;chr&gt; "The First Harmful Event was Not a Collision with a Moto…</span></span>
<span><span class="co">#&gt; $ mcarr_i1      &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ mcarr_i2      &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ mcarr_id      &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ milept        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ minute        &lt;dbl&gt; 48, 48, 35, 35, 5, 5, 30, 30, 47, 47, 47, 5, 5, 36, 36, …</span></span>
<span><span class="co">#&gt; $ mod_year      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ model         &lt;dbl&gt; NA, 37, 18, 46, 473, 473, NA, 402, 471, 471, 482, NA, 40…</span></span>
<span><span class="co">#&gt; $ month         &lt;chr&gt; "January", "January", "January", "January", "January", "…</span></span>
<span><span class="co">#&gt; $ motdir        &lt;chr&gt; "Not Applicable", NA, NA, NA, NA, NA, "Not Applicable", …</span></span>
<span><span class="co">#&gt; $ motman        &lt;chr&gt; "Not Applicable", NA, NA, NA, NA, NA, "Not Applicable", …</span></span>
<span><span class="co">#&gt; $ nhs           &lt;chr&gt; "This section IS ON the NHS", "This section IS ON the NH…</span></span>
<span><span class="co">#&gt; $ nmhelmet      &lt;chr&gt; "Not Reported", NA, NA, NA, NA, NA, "Not Reported", NA, …</span></span>
<span><span class="co">#&gt; $ nmlight       &lt;chr&gt; "Not Reported", NA, NA, NA, NA, NA, "Not Reported", NA, …</span></span>
<span><span class="co">#&gt; $ nmothpre      &lt;chr&gt; "Not Reported", NA, NA, NA, NA, NA, "Not Reported", NA, …</span></span>
<span><span class="co">#&gt; $ nmothpro      &lt;chr&gt; "Not Reported", NA, NA, NA, NA, NA, "Not Reported", NA, …</span></span>
<span><span class="co">#&gt; $ nmpropad      &lt;chr&gt; "Not Reported", NA, NA, NA, NA, NA, "Not Reported", NA, …</span></span>
<span><span class="co">#&gt; $ nmrefclo      &lt;chr&gt; "Not Reported", NA, NA, NA, NA, NA, "Not Reported", NA, …</span></span>
<span><span class="co">#&gt; $ not_hour      &lt;chr&gt; "Unknown", "Unknown", "Unknown", "Unknown", "Unknown", "…</span></span>
<span><span class="co">#&gt; $ not_min       &lt;chr&gt; "Unknown", "Unknown", "Unknown", "Unknown", "Unknown", "…</span></span>
<span><span class="co">#&gt; $ numoccs       &lt;chr&gt; NA, "Unknown", "01", "01", "02", "02", NA, "01", "02", "…</span></span>
<span><span class="co">#&gt; $ owner         &lt;chr&gt; NA, "Driver (in this crash) was  Registered Owner", "Dri…</span></span>
<span><span class="co">#&gt; $ p_crash1      &lt;chr&gt; NA, "Going Straight", "Going Straight", "Going Straight"…</span></span>
<span><span class="co">#&gt; $ p_crash2      &lt;chr&gt; NA, "Pedestrian in road", "Over the lane line on left si…</span></span>
<span><span class="co">#&gt; $ p_crash3      &lt;chr&gt; NA, "Unknown/Not Reported", "No Avoidance Maneuver", "No…</span></span>
<span><span class="co">#&gt; $ pbcwalk       &lt;chr&gt; "None Noted", NA, NA, NA, NA, NA, "None Noted", NA, NA, …</span></span>
<span><span class="co">#&gt; $ pbswalk       &lt;chr&gt; "None Noted", NA, NA, NA, NA, NA, "None Noted", NA, NA, …</span></span>
<span><span class="co">#&gt; $ pbszone       &lt;chr&gt; "None Noted", NA, NA, NA, NA, NA, "None Noted", NA, NA, …</span></span>
<span><span class="co">#&gt; $ pcrash4       &lt;chr&gt; NA, "Tracking", "Tracking", "Tracking", "Skidding latera…</span></span>
<span><span class="co">#&gt; $ pcrash5       &lt;chr&gt; NA, "Stayed in original travel lane", "Stayed on roadway…</span></span>
<span><span class="co">#&gt; $ pedcgp        &lt;chr&gt; "Pedestrian in Roadway - Circumstances Unknown", NA, NA,…</span></span>
<span><span class="co">#&gt; $ pedctype      &lt;chr&gt; "Lying in Roadway", NA, NA, NA, NA, NA, "Walking/Running…</span></span>
<span><span class="co">#&gt; $ peddir        &lt;chr&gt; "Not Applicable", NA, NA, NA, NA, NA, "Not Applicable", …</span></span>
<span><span class="co">#&gt; $ pedleg        &lt;chr&gt; "Not Applicable", NA, NA, NA, NA, NA, "Not Applicable", …</span></span>
<span><span class="co">#&gt; $ pedloc        &lt;chr&gt; "Not At Intersection", NA, NA, NA, NA, NA, "Not At Inter…</span></span>
<span><span class="co">#&gt; $ pedpos        &lt;chr&gt; "Travel Lane", NA, NA, NA, NA, NA, "Travel Lane", NA, NA…</span></span>
<span><span class="co">#&gt; $ peds          &lt;dbl&gt; 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0,…</span></span>
<span><span class="co">#&gt; $ pedsnr        &lt;chr&gt; "Not Applicable", NA, NA, NA, NA, NA, "Not Applicable", …</span></span>
<span><span class="co">#&gt; $ per_typ       &lt;chr&gt; "Pedestrian", "Driver of a Motor Vehicle In-Transport", …</span></span>
<span><span class="co">#&gt; $ permvit       &lt;dbl&gt; 1, 1, 2, 2, 2, 2, 1, 1, 3, 3, 3, 1, 1, 3, 3, 3, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ pernotmvit    &lt;dbl&gt; 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0,…</span></span>
<span><span class="co">#&gt; $ persons       &lt;dbl&gt; 1, 1, 2, 2, 2, 2, 1, 1, 3, 3, 3, 1, 1, 3, 3, 3, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ prev_acc      &lt;chr&gt; NA, "1", "None", "None", "None", "None", NA, "None", "No…</span></span>
<span><span class="co">#&gt; $ prev_dwi      &lt;chr&gt; NA, "None", "None", "None", "None", "None", NA, "None", …</span></span>
<span><span class="co">#&gt; $ prev_oth      &lt;chr&gt; NA, "None", "None", "None", "None", "None", NA, "None", …</span></span>
<span><span class="co">#&gt; $ prev_spd      &lt;chr&gt; NA, "1", "None", "None", "None", "None", NA, "None", "No…</span></span>
<span><span class="co">#&gt; $ prev_sus1     &lt;chr&gt; NA, "None", "None", "None", "None", "None", NA, "None", …</span></span>
<span><span class="co">#&gt; $ prev_sus2     &lt;chr&gt; NA, "None", "None", "None", "None", "None", NA, "None", …</span></span>
<span><span class="co">#&gt; $ prev_sus3     &lt;chr&gt; NA, "1", "None", "None", "None", "None", NA, "None", "No…</span></span>
<span><span class="co">#&gt; $ pvh_invl      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ rail          &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "N…</span></span>
<span><span class="co">#&gt; $ rd_owner      &lt;chr&gt; "City or Municipal Highway Agency", "City or Municipal H…</span></span>
<span><span class="co">#&gt; $ reg_stat      &lt;chr&gt; NA, "Virginia", "Virginia", "Virginia", "Virginia", "Vir…</span></span>
<span><span class="co">#&gt; $ rel_road      &lt;chr&gt; "On Roadway", "On Roadway", "On Roadway", "On Roadway", …</span></span>
<span><span class="co">#&gt; $ reljct1       &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No", "N…</span></span>
<span><span class="co">#&gt; $ reljct2       &lt;chr&gt; "Non-Junction", "Non-Junction", "Non-Junction", "Non-Jun…</span></span>
<span><span class="co">#&gt; $ rest_mis      &lt;chr&gt; "Not a Motor Vehicle Occupant", "None Used/Not Applicabl…</span></span>
<span><span class="co">#&gt; $ rest_use      &lt;chr&gt; "Not a Motor Vehicle Occupant", "None Used/Not Applicabl…</span></span>
<span><span class="co">#&gt; $ rolinloc      &lt;chr&gt; NA, "No Rollover", "No Rollover", "No Rollover", "On Med…</span></span>
<span><span class="co">#&gt; $ rollover      &lt;chr&gt; NA, "No Rollover", "No Rollover", "No Rollover", "Rollov…</span></span>
<span><span class="co">#&gt; $ route         &lt;chr&gt; "U.S. Highway", "U.S. Highway", "U.S. Highway", "U.S. Hi…</span></span>
<span><span class="co">#&gt; $ rur_urb       &lt;chr&gt; "Urban", "Urban", "Rural", "Rural", "Rural", "Rural", "R…</span></span>
<span><span class="co">#&gt; $ sch_bus       &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No", "N…</span></span>
<span><span class="co">#&gt; $ seat_pos      &lt;chr&gt; "Not a Motor Vehicle Occupant", "Front Seat, Left Side",…</span></span>
<span><span class="co">#&gt; $ sex           &lt;chr&gt; "Female", "Female", "Male", "Male", "Male", "Male", "Fem…</span></span>
<span><span class="co">#&gt; $ sp_jur        &lt;chr&gt; "No Special Jurisdiction", "No Special Jurisdiction", "N…</span></span>
<span><span class="co">#&gt; $ spec_use      &lt;chr&gt; NA, "No Special Use", "No Special Use", "No Special Use"…</span></span>
<span><span class="co">#&gt; $ speedrel      &lt;chr&gt; NA, "No", "No", "No", "No", "No", NA, "No", "No", "No", …</span></span>
<span><span class="co">#&gt; $ statename     &lt;chr&gt; "Virginia", "Virginia", "Virginia", "Virginia", "Virgini…</span></span>
<span><span class="co">#&gt; $ str_veh       &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0,…</span></span>
<span><span class="co">#&gt; $ tow_veh       &lt;chr&gt; NA, "No Trailing Units", "No Trailing Units", "No Traili…</span></span>
<span><span class="co">#&gt; $ towed         &lt;chr&gt; NA, "Not Towed", "Towed Due to Disabling Damage", "Towed…</span></span>
<span><span class="co">#&gt; $ trav_sp       &lt;chr&gt; NA, "Not Reported", "055 MPH", "055 MPH", "073 MPH", "07…</span></span>
<span><span class="co">#&gt; $ trlr1vin      &lt;chr&gt; NA, "No Trailing Units", "No Trailing Units", "No Traili…</span></span>
<span><span class="co">#&gt; $ trlr2vin      &lt;chr&gt; NA, "No Trailing Units", "No Trailing Units", "No Traili…</span></span>
<span><span class="co">#&gt; $ trlr3vin      &lt;chr&gt; NA, "No Trailing Units", "No Trailing Units", "No Traili…</span></span>
<span><span class="co">#&gt; $ tway_id       &lt;chr&gt; "US-60", "US-60", "US-522", "US-522", "I-85", "I-85", "C…</span></span>
<span><span class="co">#&gt; $ tway_id2      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, "TUCKER SWAMP RD", "TUCK…</span></span>
<span><span class="co">#&gt; $ typ_int       &lt;chr&gt; "Not an Intersection", "Not an Intersection", "Not an In…</span></span>
<span><span class="co">#&gt; $ underide      &lt;chr&gt; NA, "No Underride or Override Noted", "No Underride or O…</span></span>
<span><span class="co">#&gt; $ unittype      &lt;chr&gt; NA, "Motor Vehicle In-Transport (Inside or Outside the T…</span></span>
<span><span class="co">#&gt; $ v_config      &lt;chr&gt; NA, "Not Applicable", "Not Applicable", "Not Applicable"…</span></span>
<span><span class="co">#&gt; $ valign        &lt;chr&gt; NA, "Straight", "Straight", "Straight", "Straight", "Str…</span></span>
<span><span class="co">#&gt; $ ve_forms      &lt;dbl&gt; 1, 1, 2, 2, 1, 1, 1, 1, 2, 2, 2, 1, 1, 2, 2, 2, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ ve_total      &lt;dbl&gt; 1, 1, 2, 2, 1, 1, 1, 1, 2, 2, 2, 1, 1, 2, 2, 2, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ vin           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ vnum_lan      &lt;chr&gt; NA, "Two lanes", "Two lanes", "Two lanes", "Two lanes", …</span></span>
<span><span class="co">#&gt; $ vpavetyp      &lt;chr&gt; NA, "Blacktop, Bituminous, or Asphalt", "Blacktop, Bitum…</span></span>
<span><span class="co">#&gt; $ vprofile      &lt;chr&gt; NA, "Level", "Grade, Unknown Slope", "Grade, Unknown Slo…</span></span>
<span><span class="co">#&gt; $ vspd_lim      &lt;chr&gt; NA, "35 MPH", "55 MPH", "55 MPH", "70 MPH", "70 MPH", NA…</span></span>
<span><span class="co">#&gt; $ vsurcond      &lt;chr&gt; NA, "Dry", "Dry", "Dry", "Wet", "Wet", NA, "Dry", "Dry",…</span></span>
<span><span class="co">#&gt; $ vtcont_f      &lt;chr&gt; NA, "No Controls", "No Controls", "No Controls", "No Con…</span></span>
<span><span class="co">#&gt; $ vtrafcon      &lt;chr&gt; NA, "No Controls", "No Controls", "No Controls", "No Con…</span></span>
<span><span class="co">#&gt; $ vtrafway      &lt;chr&gt; NA, "Two-Way,  Divided, Positive  Median Barrier", "Two-…</span></span>
<span><span class="co">#&gt; $ work_inj      &lt;chr&gt; "No", "Not Applicable (not a fatality)", "No", "Not Appl…</span></span>
<span><span class="co">#&gt; $ wrk_zone      &lt;chr&gt; "None", "None", "None", "None", "None", "None", "None", …</span></span>
<span><span class="co">#&gt; $ gvwr_from     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ gvwr_to       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ icfinalbody   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ trlr1gvwr     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ trlr2gvwr     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ trlr3gvwr     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ vpicbodyclass &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ vpicmake      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ vpicmodel     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span>
<span><span class="co">#&gt; $ underoverride &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span></span></code></pre></div>
<p>The <code>multi_</code> tibbles contain those variables for which there may be a varying number of values for any entity (e.g., driver impairments, vehicle events, weather conditions at time of crash). Each tibble has the requisite data elements corresponding to the entity: <code>multi_acc</code> includes <code>st_case</code> and <code>year</code>, <code>multi_veh</code> adds <code>veh_no</code> (vehicle number), and <code>multi_per</code> adds <code>per_no</code> (person number).</p>
<p>The top three name-value pairs of each tibble are shown below.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myFARS</span><span class="op">$</span><span class="va">multi_acc</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rank</span><span class="op">&lt;=</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">rank</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'name'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span><span class="co">#&gt; # A tibble: 21 × 3</span></span>
<span><span class="co">#&gt; # Groups:   name [7]</span></span>
<span><span class="co">#&gt;    name    value                                                               n</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;                                                           &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 cf1     Motor Vehicle struck by falling cargo,or something that came l…   702</span></span>
<span><span class="co">#&gt;  2 cf1     Police Pursuit Involved                                           343</span></span>
<span><span class="co">#&gt;  3 cf1     Indication of a Stalled/Disabled Vehicle                          313</span></span>
<span><span class="co">#&gt;  4 cf2     Reported as Unknown                                               248</span></span>
<span><span class="co">#&gt;  5 cf2     Indication of a Stalled/Disabled Vehicle                           68</span></span>
<span><span class="co">#&gt;  6 cf2     Recent/Previous Crash scene Nearby                                 43</span></span>
<span><span class="co">#&gt;  7 cf3     Reported as Unknown                                               248</span></span>
<span><span class="co">#&gt;  8 cf3     Indication of a Stalled/Disabled Vehicle                            4</span></span>
<span><span class="co">#&gt;  9 cf3     Motor Vehicle struck by falling cargo,or something that came l…     4</span></span>
<span><span class="co">#&gt; 10 crashrf Motor Vehicle struck by falling cargo,or something that came l…  1675</span></span>
<span><span class="co">#&gt; # … with 11 more rows</span></span>
<span></span>
<span><span class="va">myFARS</span><span class="op">$</span><span class="va">multi_veh</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rank</span><span class="op">&lt;=</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">rank</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'name'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span><span class="co">#&gt; # A tibble: 65 × 3</span></span>
<span><span class="co">#&gt; # Groups:   name [22]</span></span>
<span><span class="co">#&gt;    name   value                                                                n</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                                                            &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 damage 12 Clock Value                                                   83188</span></span>
<span><span class="co">#&gt;  2 damage 11 Clock Value                                                   45840</span></span>
<span><span class="co">#&gt;  3 damage 1 Clock Value                                                    43183</span></span>
<span><span class="co">#&gt;  4 dr_sf1 Failure to Yield Right-of-Way                                     3331</span></span>
<span><span class="co">#&gt;  5 dr_sf1 Careless Driving                                                  2996</span></span>
<span><span class="co">#&gt;  6 dr_sf1 Improper Lane Usage                                               2938</span></span>
<span><span class="co">#&gt;  7 dr_sf2 Reported as Unknown                                               1987</span></span>
<span><span class="co">#&gt;  8 dr_sf2 Operating the Vehicle in an Erratic, Reckless or Negligent Mann…   604</span></span>
<span><span class="co">#&gt;  9 dr_sf2 Failure to Obey Actual Traffic Sign,Traffic Control Devices or …   475</span></span>
<span><span class="co">#&gt; 10 dr_sf3 Reported as Unknown                                               1987</span></span>
<span><span class="co">#&gt; # … with 55 more rows</span></span>
<span></span>
<span><span class="va">myFARS</span><span class="op">$</span><span class="va">multi_per</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rank</span><span class="op">&lt;=</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">rank</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'name'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span><span class="co">#&gt; # A tibble: 46 × 3</span></span>
<span><span class="co">#&gt; # Groups:   name [16]</span></span>
<span><span class="co">#&gt;    name     value                                           n</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;                                       &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 drugres  Test Not Given                             150302</span></span>
<span><span class="co">#&gt;  2 drugres  Tested, No Drugs Found/Negative             40884</span></span>
<span><span class="co">#&gt;  3 drugres  Other Drug                                  13496</span></span>
<span><span class="co">#&gt;  4 drugspec Test Not Given                             150304</span></span>
<span><span class="co">#&gt;  5 drugspec Whole Blood                                114007</span></span>
<span><span class="co">#&gt;  6 drugspec Reported as Unknown if Tested               11641</span></span>
<span><span class="co">#&gt;  7 mnmdstrd Not Distracted                               1896</span></span>
<span><span class="co">#&gt;  8 mnmdstrd Reported as Unknown if Distracted             496</span></span>
<span><span class="co">#&gt;  9 mnmdstrd Inattention (Inattentive), Details Unknown     82</span></span>
<span><span class="co">#&gt; 10 mpr_act  Crossing Roadway                             4461</span></span>
<span><span class="co">#&gt; # … with 36 more rows</span></span></code></pre></div>
<p>The <code>events</code> tibble provides a sequence of numbered events for each vehicle in each crash.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">myFARS</span><span class="op">$</span><span class="va">events</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;      state st_case veh_no                                   aoi</span></span>
<span><span class="co">#&gt; 1  Alabama   10001      1                        12 Clock Point</span></span>
<span><span class="co">#&gt; 2  Alabama   10001      2                         6 Clock Point</span></span>
<span><span class="co">#&gt; 3  Alabama   10002      1                        12 Clock Point</span></span>
<span><span class="co">#&gt; 4  Alabama   10002      1                     Non-Harmful Event</span></span>
<span><span class="co">#&gt; 5  Alabama   10002      1                         Non-Collision</span></span>
<span><span class="co">#&gt; 6  Alabama   10002      2                         6 Clock Point</span></span>
<span><span class="co">#&gt; 7  Alabama   10003      1                        12 Clock Point</span></span>
<span><span class="co">#&gt; 8  Alabama   10003      1 Other Objects or Person Set-In-Motion</span></span>
<span><span class="co">#&gt; 9  Alabama   10003      2                         6 Clock Point</span></span>
<span><span class="co">#&gt; 10 Alabama   10003      3                        12 Clock Point</span></span>
<span><span class="co">#&gt;                                                                                                                                      soe</span></span>
<span><span class="co">#&gt; 1                                                                                                             Motor Vehicle In-Transport</span></span>
<span><span class="co">#&gt; 2                                                                                                             Motor Vehicle In-Transport</span></span>
<span><span class="co">#&gt; 3                                                                                                             Motor Vehicle In-Transport</span></span>
<span><span class="co">#&gt; 4                                                                                                                 Ran Off Roadway - Left</span></span>
<span><span class="co">#&gt; 5                                                                                                                      Rollover/Overturn</span></span>
<span><span class="co">#&gt; 6                                                                                                             Motor Vehicle In-Transport</span></span>
<span><span class="co">#&gt; 7                                                                                                             Motor Vehicle In-Transport</span></span>
<span><span class="co">#&gt; 8  Motor Vehicle In-Transport Strikes or is Struck by Cargo, Persons or Objects Set-in-Motion from/by Another Motor Vehicle In Transport</span></span>
<span><span class="co">#&gt; 9                                                                                                             Motor Vehicle In-Transport</span></span>
<span><span class="co">#&gt; 10 Motor Vehicle In-Transport Strikes or is Struck by Cargo, Persons or Objects Set-in-Motion from/by Another Motor Vehicle In Transport</span></span>
<span><span class="co">#&gt;    veventnum year</span></span>
<span><span class="co">#&gt; 1          1 2019</span></span>
<span><span class="co">#&gt; 2          1 2019</span></span>
<span><span class="co">#&gt; 3          1 2019</span></span>
<span><span class="co">#&gt; 4          2 2019</span></span>
<span><span class="co">#&gt; 5          3 2019</span></span>
<span><span class="co">#&gt; 6          1 2019</span></span>
<span><span class="co">#&gt; 7          1 2019</span></span>
<span><span class="co">#&gt; 8          2 2019</span></span>
<span><span class="co">#&gt; 9          1 2019</span></span>
<span><span class="co">#&gt; 10         1 2019</span></span></code></pre></div>
<p>The <code>codebook</code> tibble provides a searchable codebook for the data, useful if you know what concept you’re looking for but not the variable that describes it.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View(myFARS$codebook)</span></span>
<span></span>
<span><span class="va">myFARS</span><span class="op">$</span><span class="va">codebook</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name_rfars</span> <span class="op">==</span> <span class="st">"lgt_cond"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;    source year     file name_ncsa name_rfars           label value</span></span>
<span><span class="co">#&gt; 1    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     1</span></span>
<span><span class="co">#&gt; 2    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     2</span></span>
<span><span class="co">#&gt; 3    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     3</span></span>
<span><span class="co">#&gt; 4    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     4</span></span>
<span><span class="co">#&gt; 5    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     5</span></span>
<span><span class="co">#&gt; 6    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     6</span></span>
<span><span class="co">#&gt; 7    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     7</span></span>
<span><span class="co">#&gt; 8    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     8</span></span>
<span><span class="co">#&gt; 9    FARS 2019 accident  LGT_COND   lgt_cond Light Condition     9</span></span>
<span><span class="co">#&gt; 10   FARS 2020 accident  LGT_COND   lgt_cond Light Condition     1</span></span>
<span><span class="co">#&gt;                value_label</span></span>
<span><span class="co">#&gt; 1                 Daylight</span></span>
<span><span class="co">#&gt; 2       Dark - Not Lighted</span></span>
<span><span class="co">#&gt; 3           Dark - Lighted</span></span>
<span><span class="co">#&gt; 4                     Dawn</span></span>
<span><span class="co">#&gt; 5                     Dusk</span></span>
<span><span class="co">#&gt; 6  Dark - Unknown Lighting</span></span>
<span><span class="co">#&gt; 7                    Other</span></span>
<span><span class="co">#&gt; 8             Not Reported</span></span>
<span><span class="co">#&gt; 9      Reported as Unknown</span></span>
<span><span class="co">#&gt; 10                Daylight</span></span></code></pre></div>
<div class="section level3">
<h3 id="counts">Counts<a class="anchor" aria-label="anchor" href="#counts"></a>
</h3>
<p>A first step in many transportation safety analyses involves counting the number of relevant crashes, fatalities, or people involved. <code><a href="reference/counts.html">counts()</a></code> lets users specify <em>what</em> to count, <em>where</em> to count them (rural/urban and/or in specified states or regions), <em>who</em> to include, the <em>interval</em> over which to count (annually or monthly), and factors <em>involved</em> in the crashes. It returns a simple tibble that can be easily piped into <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code> to quickly visualize counts.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span></span>
<span>  <span class="va">myFARS</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"crashes"</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_counts</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 8</span></span>
<span><span class="co">#&gt; # Groups:   year [3]</span></span>
<span><span class="co">#&gt;    year date           n what    states region urb   who  </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1  2019 2019-01-01   774 crashes all    all    all   all  </span></span>
<span><span class="co">#&gt; 2  2020 2020-01-01   796 crashes all    all    all   all  </span></span>
<span><span class="co">#&gt; 3  2021 2021-01-01   906 crashes all    all    all   all</span></span>
<span></span>
<span><span class="va">my_counts</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">n</span>, label<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Fatal Crashes in Virginia"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span></span>
<span>  <span class="va">myFARS</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"fatalities"</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">n</span>, label<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Fatalities in Virginia"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span><span class="va">myFARS</span>,</span>
<span>       what <span class="op">=</span> <span class="st">"fatalities"</span>,</span>
<span>       where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>urb<span class="op">=</span><span class="st">"rural"</span><span class="op">)</span>,</span>
<span>       interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span></span>
<span>       <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">n</span>, label<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Rural Fatalities in Virginia"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span><span class="va">myFARS</span>,</span>
<span>       what <span class="op">=</span> <span class="st">"fatalities"</span>,</span>
<span>       where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>urb<span class="op">=</span><span class="st">"rural"</span><span class="op">)</span>,</span>
<span>       interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span>,</span>
<span>       involved <span class="op">=</span> <span class="st">"speeding"</span></span>
<span>       <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">n</span>, label<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Speeding-Related Fatalities in Rural Virginia"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-11-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>We can combine two <code><a href="reference/counts.html">counts()</a></code> results to make a comparison. Here we compare the number of speeding-related fatalities in rural and urban Virginia:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/compare_counts.html">compare_counts</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">myFARS</span>,</span>
<span>  involved <span class="op">=</span> <span class="st">"speeding"</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"fatalities"</span>,</span>
<span>  where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>urb<span class="op">=</span><span class="st">"rural"</span><span class="op">)</span>,</span>
<span>  where2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>urb<span class="op">=</span><span class="st">"urban"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">n</span>, label<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">.</span><span class="op">~</span><span class="va">urb</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Speeding-Related Fatalities in Virginia"</span>, fill<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-12-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="mapping">Mapping<a class="anchor" aria-label="anchor" href="#mapping"></a>
</h3>
<p>We can take advantage of having access to the full data with maps. Here we map pedestrian and bicyclist fatalities in Virginia:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span></span>
<span>  <span class="va">myFARS</span>, </span>
<span>  what <span class="op">=</span> <span class="st">"crashes"</span>, </span>
<span>  involved <span class="op">=</span> <span class="st">"pedbike"</span>, </span>
<span>  filterOnly <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span><span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html" class="external-link">leaflet</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html" class="external-link">addTiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://bhaskarvk.github.io/leaflet.extras/reference/heatmap.html" class="external-link">addHeatmap</a></span><span class="op">(</span>group <span class="op">=</span> <span class="st">"Heatmap"</span>, radius<span class="op">=</span><span class="fl">10</span>, blur<span class="op">=</span><span class="fl">20</span>, minOpacity <span class="op">=</span> <span class="fl">.01</span>, max <span class="op">=</span> <span class="fl">.2</span>, cellSize <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html" class="external-link">addCircleMarkers</a></span><span class="op">(</span></span>
<span>    radius <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>    stroke <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fillOpacity <span class="op">=</span> <span class="fl">0.7</span>, group <span class="op">=</span> <span class="st">"Crash Locations"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Assuming "lon" and "lat" are longitude and latitude, respectively</span></span>
<span><span class="co">#&gt; Assuming "lon" and "lat" are longitude and latitude, respectively</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>Drug-related crashes:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span></span>
<span>  <span class="va">myFARS</span>, </span>
<span>  what <span class="op">=</span> <span class="st">"crashes"</span>, </span>
<span>  involved <span class="op">=</span> <span class="st">"drugs"</span>, </span>
<span>  filterOnly <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lat</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lon</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">&lt;</span> <span class="fl">90</span>, <span class="va">lon</span> <span class="op">&lt;</span> <span class="fl">900</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html" class="external-link">leaflet</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html" class="external-link">addTiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://bhaskarvk.github.io/leaflet.extras/reference/heatmap.html" class="external-link">addHeatmap</a></span><span class="op">(</span>group <span class="op">=</span> <span class="st">"Heatmap"</span>, radius<span class="op">=</span><span class="fl">10</span>, blur<span class="op">=</span><span class="fl">20</span>, minOpacity <span class="op">=</span> <span class="fl">.01</span>, max <span class="op">=</span> <span class="fl">.2</span>, cellSize <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html" class="external-link">addCircleMarkers</a></span><span class="op">(</span></span>
<span>    radius <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>    stroke <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fillOpacity <span class="op">=</span> <span class="fl">0.7</span>, group <span class="op">=</span> <span class="st">"Crash Locations"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Assuming "lon" and "lat" are longitude and latitude, respectively</span></span>
<span><span class="co">#&gt; Assuming "lon" and "lat" are longitude and latitude, respectively</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-14-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>Young drivers:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span></span>
<span>  <span class="va">myFARS</span>, </span>
<span>  what <span class="op">=</span> <span class="st">"crashes"</span>, </span>
<span>  involved <span class="op">=</span> <span class="st">"young driver"</span>, </span>
<span>  filterOnly <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lat</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lon</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">&lt;</span> <span class="fl">90</span>, <span class="va">lon</span> <span class="op">&lt;</span> <span class="fl">900</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html" class="external-link">leaflet</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html" class="external-link">addTiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://bhaskarvk.github.io/leaflet.extras/reference/heatmap.html" class="external-link">addHeatmap</a></span><span class="op">(</span>group <span class="op">=</span> <span class="st">"Heatmap"</span>, radius<span class="op">=</span><span class="fl">10</span>, blur<span class="op">=</span><span class="fl">20</span>, minOpacity <span class="op">=</span> <span class="fl">.01</span>, max <span class="op">=</span> <span class="fl">.2</span>, cellSize <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html" class="external-link">addCircleMarkers</a></span><span class="op">(</span></span>
<span>    radius <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>    stroke <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fillOpacity <span class="op">=</span> <span class="fl">0.7</span>, group <span class="op">=</span> <span class="st">"Crash Locations"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Assuming "lon" and "lat" are longitude and latitude, respectively</span></span>
<span><span class="co">#&gt; Assuming "lon" and "lat" are longitude and latitude, respectively</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-15-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="modeling">Modeling<a class="anchor" aria-label="anchor" href="#modeling"></a>
</h3>
<p>Having access to the full dataset also allows us to develop statistical models. Here we fit a simple model of injury severity as a function of age and restraint use. The results indicate that injury severity increases with age, and when seat belts are not used properly.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># table(myFARS$flat$inj_sev)</span></span>
<span><span class="co"># table(myFARS$flat$rest_use, useNA = "ifany")</span></span>
<span><span class="co"># table(myFARS$flat$per_typ, useNA = "ifany")</span></span>
<span></span>
<span><span class="va">model_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">myFARS</span><span class="op">$</span><span class="va">flat</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rest_use</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lap Belt Only Used"</span>,</span>
<span>                         <span class="st">"Shoulder Belt Only Used"</span>,</span>
<span>                         <span class="st">"None Used / Not Applicable"</span>,</span>
<span>                         <span class="st">"None Used/Not Applicable"</span>,</span>
<span>                         <span class="st">"Shoulder and Lap Belt Used"</span><span class="op">)</span>,</span>
<span>         <span class="va">per_typ</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Driver of a Motor Vehicle In-Transport"</span>,</span>
<span>                        <span class="st">"Passenger of a Motor Vehicle In-Transport"</span><span class="op">)</span></span>
<span>         <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    rest_use <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">rest_use</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lap Belt Only Used"</span>, <span class="st">"Shoulder Belt Only Used"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Partial"</span>,</span>
<span>      <span class="va">rest_use</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None Used / Not Applicable"</span>, <span class="st">"None Used/Not Applicable"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"None"</span>,</span>
<span>      <span class="va">rest_use</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Shoulder and Lap Belt Used"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Full"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Unknown"</span></span>
<span>      <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/stats/relevel.html" class="external-link">relevel</a></span><span class="op">(</span>ref <span class="op">=</span> <span class="st">"Full"</span><span class="op">)</span>,</span>
<span>    kabco <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">inj_sev</span> <span class="op">==</span> <span class="st">"Fatal Injury (K)"</span> <span class="op">~</span> <span class="fl">4</span>,</span>
<span>      <span class="va">inj_sev</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Suspected Serious Injury (A)"</span>, </span>
<span>                     <span class="st">"Suspected Serious Injury(A)"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">3</span>,</span>
<span>      <span class="va">inj_sev</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Suspected Minor Injury (B)"</span>, </span>
<span>                     <span class="st">"Suspected Minor Injury(B)"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>      <span class="va">inj_sev</span> <span class="op">==</span> <span class="st">"Possible Injury (C)"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">inj_sev</span> <span class="op">==</span> <span class="st">"No Apparent Injury (O)"</span> <span class="op">~</span> <span class="fl">0</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    age_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\D+"</span>,<span class="st">""</span>, <span class="va">age</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">kabco</span> <span class="op">~</span> <span class="va">age_n</span> <span class="op">+</span> <span class="va">rest_use</span>, data <span class="op">=</span> <span class="va">model_data</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu">stargazer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/stargazer/man/stargazer.html" class="external-link">stargazer</a></span><span class="op">(</span><span class="va">my_model</span>, type <span class="op">=</span> <span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table style="text-align:center" class="table">
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="1" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
kabco
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
age_n
</td>
<td>
0.009<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.001)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
rest_useNone
</td>
<td>
1.442<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.040)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
rest_usePartial
</td>
<td>
0.453<sup>**</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.211)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
1.759<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.051)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
4,583
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.222
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.222
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
1.324 (df = 4579)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
436.515<sup>***</sup> (df = 3; 4579)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td style="text-align:right">
<sup><em></em></sup>p&lt;0.1; <sup><strong></strong></sup>p&lt;0.05; <sup></sup>p&lt;0.01
</td>
</tr>
</table>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>  age_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>  rest_use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Full"</span>, <span class="st">"Partial"</span>, <span class="st">"None"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Full"</span>, <span class="st">"Partial"</span>, <span class="st">"None"</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">new_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">my_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span>,</span>
<span>         age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">age_n</span>, <span class="st">" yrs"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">rest_use</span>, y<span class="op">=</span><span class="va">pred</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">.</span><span class="op">~</span><span class="va">age</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span>
<span>      limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">4</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">4</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"O"</span>, <span class="st">"C"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"K"</span><span class="op">)</span>, expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>          panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">""</span>, title <span class="op">=</span> <span class="st">"Predicted Injury Severity by Age and Restraint Use"</span>,</span>
<span>         caption <span class="op">=</span> <span class="st">"Full = correctly used seatbelt, partial = partially correctly used, none = no seatbelt."</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-17-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="getting-and-using-gescrss-data">Getting and Using GES/CRSS Data<a class="anchor" aria-label="anchor" href="#getting-and-using-gescrss-data"></a>
</h2>
<p>Use the <code>get_grscrss()</code> function to bring GES/CRSS data into the current environment and optionally save an RDS file for future use (faster than downloading anew). This is done by (a) downloading the data to a temporary directory, (b) downloading to a permanent directory, or (c) importing from a permanent directory. After data is downloaded to a permanent directory, the function will look there rather than downloading the data again. If a year of data is requested but not found, R will ask your permission to download the missing data.</p>
<p>Here we get three years of data. We do not specify a region so that we can confirm the results with official data.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myGESCRSS</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_gescrss.html">get_gescrss</a></span><span class="op">(</span>years <span class="op">=</span> <span class="fl">2019</span><span class="op">:</span><span class="fl">2021</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in dir.create(paste0(dest_raw_y, "/format-32")):</span></span>
<span><span class="co">#&gt; 'C:\Users\s87ja\AppData\Local\Temp\Rtmpkj60Mx\GESCRSS data\raw\2020\format-32'</span></span>
<span><span class="co">#&gt; already exists</span></span>
<span><span class="co">#&gt; Warning in dir.create(paste0(dest_raw_y, "/format-64")):</span></span>
<span><span class="co">#&gt; 'C:\Users\s87ja\AppData\Local\Temp\Rtmpkj60Mx\GESCRSS data\raw\2020\format-64'</span></span>
<span><span class="co">#&gt; already exists</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; cols(</span></span>
<span><span class="co">#&gt;   .default = col_character(),</span></span>
<span><span class="co">#&gt;   year = col_double(),</span></span>
<span><span class="co">#&gt;   psu = col_double(),</span></span>
<span><span class="co">#&gt;   psustrat = col_double(),</span></span>
<span><span class="co">#&gt;   casenum = col_double(),</span></span>
<span><span class="co">#&gt;   weight = col_double(),</span></span>
<span><span class="co">#&gt;   id = col_double(),</span></span>
<span><span class="co">#&gt;   veh_no = col_double(),</span></span>
<span><span class="co">#&gt;   per_no = col_double(),</span></span>
<span><span class="co">#&gt;   minute = col_double(),</span></span>
<span><span class="co">#&gt;   mod_year = col_logical(),</span></span>
<span><span class="co">#&gt;   model = col_double(),</span></span>
<span><span class="co">#&gt;   peds = col_double(),</span></span>
<span><span class="co">#&gt;   permvit = col_double(),</span></span>
<span><span class="co">#&gt;   pernotmvit = col_double(),</span></span>
<span><span class="co">#&gt;   psu_var = col_double(),</span></span>
<span><span class="co">#&gt;   pvh_invl = col_double(),</span></span>
<span><span class="co">#&gt;   str_veh = col_double(),</span></span>
<span><span class="co">#&gt;   ve_forms = col_double(),</span></span>
<span><span class="co">#&gt;   ve_total = col_double()</span></span>
<span><span class="co">#&gt; )</span></span>
<span><span class="co">#&gt; ℹ Use `spec()` for the full column specifications.</span></span></code></pre></div>
<p>This returns a ‘GESCRSS’ object: a list with six tibbles: <code>flat</code>, <code>multi_acc</code>, <code>multi_veh</code>, <code>multi_per</code>, <code>events</code>, and <code>codebook</code>.</p>
<p>The <code>flat</code> tibble contains all variables for which there is just one value per crash (“accident”), vehicle, or person (e.g., weather conditions, travel speed, age). Each row corresponds to a person involved in a crash. As there may be multiple people and/or vehicles involved in one crash, some variable-values are repeated within a crash or vehicle. Each crash is uniquely identified with <code>id</code>, which is a combination of <code>year</code> and <code>casenum</code>.</p>
<p>Please review the <a href="https://crashstats.nhtsa.dot.gov/Api/Public/ViewPublication/813436" class="external-link">CRSS Analytical User’s Manual</a> for more information.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">myGESCRSS</span><span class="op">$</span><span class="va">flat</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 401,162</span></span>
<span><span class="co">#&gt; Columns: 144</span></span>
<span><span class="co">#&gt; $ year           &lt;dbl&gt; 2019, 2019, 2019, 2019, 2019, 2019, 2019, 2019, 2019, 2…</span></span>
<span><span class="co">#&gt; $ region         &lt;chr&gt; "South (MD, DE, DC, WV, VA, KY, TN, NC, SC, GA, FL, AL,…</span></span>
<span><span class="co">#&gt; $ psu            &lt;dbl&gt; 75, 63, 63, 63, 63, 63, 63, 65, 65, 12, 12, 12, 12, 75,…</span></span>
<span><span class="co">#&gt; $ psustrat       &lt;dbl&gt; 19, 16, 16, 16, 16, 16, 16, 13, 13, 12, 12, 12, 12, 19,…</span></span>
<span><span class="co">#&gt; $ casenum        &lt;dbl&gt; 201901174219, 201901176655, 201901176655, 201901176655,…</span></span>
<span><span class="co">#&gt; $ weight         &lt;dbl&gt; 203.66512, 59.07346, 59.07346, 59.07346, 59.07346, 59.0…</span></span>
<span><span class="co">#&gt; $ id             &lt;dbl&gt; 2.019202e+15, 2.019202e+15, 2.019202e+15, 2.019202e+15,…</span></span>
<span><span class="co">#&gt; $ veh_no         &lt;dbl&gt; 1, 1, 1, 1, 1, 2, 2, 1, 2, 1, 1, 2, 2, 1, 2, 0, 1, 1, 1…</span></span>
<span><span class="co">#&gt; $ per_no         &lt;dbl&gt; 1, 1, 2, 3, 4, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2…</span></span>
<span><span class="co">#&gt; $ acc_type       &lt;chr&gt; "B7-Single Driver-Left Roadside Departure-Control/Tract…</span></span>
<span><span class="co">#&gt; $ age            &lt;chr&gt; "39 Years", "20 Years", "19 Years", "47 Years", "39 Yea…</span></span>
<span><span class="co">#&gt; $ air_bag        &lt;chr&gt; "Not Deployed", "Not Deployed", "Not Deployed", "Not De…</span></span>
<span><span class="co">#&gt; $ alc_res        &lt;chr&gt; "Test Not Given", "Test Not Given", "Test Not Given", "…</span></span>
<span><span class="co">#&gt; $ alc_status     &lt;chr&gt; "Test Not Given", "Test Not Given", "Test Not Given", "…</span></span>
<span><span class="co">#&gt; $ alcohol        &lt;chr&gt; "No Alcohol Involved", "No Alcohol Involved", "No Alcoh…</span></span>
<span><span class="co">#&gt; $ atst_typ       &lt;chr&gt; "Test Not Given", "Test Not Given", "Test Not Given", "…</span></span>
<span><span class="co">#&gt; $ bikecgp        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ bikectype      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ bikedir        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ bikeloc        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ bikepos        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ body_typ       &lt;chr&gt; "Light Pickup", "4-door sedan, hardtop", "4-door sedan,…</span></span>
<span><span class="co">#&gt; $ bus_use        &lt;chr&gt; "Not a Bus", "Not a Bus", "Not a Bus", "Not a Bus", "No…</span></span>
<span><span class="co">#&gt; $ cargo_bt       &lt;chr&gt; "Not Applicable (N/A)", "Not Applicable (N/A)", "Not Ap…</span></span>
<span><span class="co">#&gt; $ day_week       &lt;chr&gt; "3", "3", "3", "3", "3", "3", "3", "3", "3", "3", "3", …</span></span>
<span><span class="co">#&gt; $ deformed       &lt;chr&gt; "Disabling Damage", "Functional Damage", "Functional Da…</span></span>
<span><span class="co">#&gt; $ dr_pres        &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes",…</span></span>
<span><span class="co">#&gt; $ dr_zip         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ drinking       &lt;chr&gt; "No (Alcohol Not Involved)", "No (Alcohol Not Involved)…</span></span>
<span><span class="co">#&gt; $ drugs          &lt;chr&gt; "No (drugs not involved)", "Not Reported", "Not Reporte…</span></span>
<span><span class="co">#&gt; $ ejection       &lt;chr&gt; "Not Ejected", "Not Ejected", "Not Ejected", "Not Eject…</span></span>
<span><span class="co">#&gt; $ emer_use       &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ fire_exp       &lt;chr&gt; "No or Not Reported", "No or Not Reported", "No or Not …</span></span>
<span><span class="co">#&gt; $ gvwr           &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ harm_ev        &lt;chr&gt; "Curb", "Motor Vehicle In-Transport", "Motor Vehicle In…</span></span>
<span><span class="co">#&gt; $ haz_cno        &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ haz_id         &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ haz_inv        &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No", "…</span></span>
<span><span class="co">#&gt; $ haz_plac       &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ haz_rel        &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ helm_mis       &lt;chr&gt; "None Used/Not Applicable", "None Used/Not Applicable",…</span></span>
<span><span class="co">#&gt; $ helm_use       &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ hit_run        &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No", "…</span></span>
<span><span class="co">#&gt; $ hospital       &lt;chr&gt; "Not Transported", "Not Transported", "Other", "Not Tra…</span></span>
<span><span class="co">#&gt; $ hour           &lt;chr&gt; "8:00am-8:59am", "2:00am-2:59am", "2:00am-2:59am", "2:0…</span></span>
<span><span class="co">#&gt; $ impact1        &lt;chr&gt; "3 Clock Point", "Right", "Right", "Right", "Right", "1…</span></span>
<span><span class="co">#&gt; $ inj_sev        &lt;chr&gt; "No Apparent Injury (O)", "No Apparent Injury (O)", "Po…</span></span>
<span><span class="co">#&gt; $ int_hwy        &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No", "…</span></span>
<span><span class="co">#&gt; $ j_knife        &lt;chr&gt; "Not an Articulated Vehicle", "Not an Articulated Vehic…</span></span>
<span><span class="co">#&gt; $ lgt_cond       &lt;chr&gt; "Daylight", "Dark - Lighted", "Dark - Lighted", "Dark -…</span></span>
<span><span class="co">#&gt; $ location       &lt;chr&gt; "Occupant of a Motor Vehicle", "Occupant of a Motor Veh…</span></span>
<span><span class="co">#&gt; $ m_harm         &lt;chr&gt; "Rollover/Overturn", "Motor Vehicle In-Transport", "Mot…</span></span>
<span><span class="co">#&gt; $ mak_mod        &lt;chr&gt; "Ford Ranger", "Dodge Dart (2013 on. See model 001 for …</span></span>
<span><span class="co">#&gt; $ make           &lt;chr&gt; "Ford", "Dodge", "Dodge", "Dodge", "Dodge", "Honda", "H…</span></span>
<span><span class="co">#&gt; $ man_coll       &lt;chr&gt; "The First Harmful Event was Not a Collision with a Mot…</span></span>
<span><span class="co">#&gt; $ max_sev        &lt;chr&gt; "No Apparent Injury (O)", "Possible Injury (C)", "Possi…</span></span>
<span><span class="co">#&gt; $ max_vsev       &lt;chr&gt; "No Apparent Injury (O)", "Possible Injury (C)", "Possi…</span></span>
<span><span class="co">#&gt; $ mcarr_i1       &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ mcarr_i2       &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ mcarr_id       &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ minute         &lt;dbl&gt; 6, 12, 12, 12, 12, 12, 12, 33, 33, 8, 41, 41, 41, 42, 4…</span></span>
<span><span class="co">#&gt; $ mod_year       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ model          &lt;dbl&gt; 471, 29, 29, 29, 29, 402, 402, 402, 481, 51, 422, 32, 3…</span></span>
<span><span class="co">#&gt; $ month          &lt;chr&gt; "January", "January", "January", "January", "January", …</span></span>
<span><span class="co">#&gt; $ motdir         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ motman         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ nmhelmet       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ nmlight        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ nmothpre       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ nmothpro       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ nmpropad       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ nmrefclo       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ num_inj        &lt;chr&gt; "No Person Injured/Property Damage Only Crash", NA, NA,…</span></span>
<span><span class="co">#&gt; $ num_injv       &lt;chr&gt; "No Person Injured in Vehicle", NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ numoccs        &lt;chr&gt; "01", "04", "04", "04", "04", "02", "02", "01", "01", "…</span></span>
<span><span class="co">#&gt; $ p_crash1       &lt;chr&gt; "Accelerating in Road", "Going Straight", "Going Straig…</span></span>
<span><span class="co">#&gt; $ p_crash2       &lt;chr&gt; "Traveling too fast for conditions or Road Configuratio…</span></span>
<span><span class="co">#&gt; $ p_crash3       &lt;chr&gt; "Unknown/Not Reported", "Unknown/Not Reported", "Unknow…</span></span>
<span><span class="co">#&gt; $ pbcwalk        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ pbptype        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ pbswalk        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ pbszone        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ pcrash4        &lt;chr&gt; "Skidding Laterally, Rotation Direction Unknown", "Trac…</span></span>
<span><span class="co">#&gt; $ pcrash5        &lt;chr&gt; "Departed roadway", "Stayed in original travel lane", "…</span></span>
<span><span class="co">#&gt; $ pedcgp         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ pedctype       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ peddir         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ pedleg         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ pedloc         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ pedpos         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ peds           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0…</span></span>
<span><span class="co">#&gt; $ pedsnr         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ per_typ        &lt;chr&gt; "Driver of a Motor Vehicle In-Transport", "Driver of a …</span></span>
<span><span class="co">#&gt; $ permvit        &lt;dbl&gt; 1, 6, 6, 6, 6, 6, 6, 2, 2, 1, 3, 3, 3, 2, 2, 1, 1, 3, 3…</span></span>
<span><span class="co">#&gt; $ pernotmvit     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0…</span></span>
<span><span class="co">#&gt; $ psu_var        &lt;dbl&gt; 75, 63, 63, 63, 63, 63, 63, 65, 65, 12, 12, 12, 12, 75,…</span></span>
<span><span class="co">#&gt; $ pvh_invl       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</span></span>
<span><span class="co">#&gt; $ rel_road       &lt;chr&gt; "On Median", "On Roadway", "On Roadway", "On Roadway", …</span></span>
<span><span class="co">#&gt; $ reljct1        &lt;chr&gt; "Yes", "Not Reported", "Not Reported", "Not Reported", …</span></span>
<span><span class="co">#&gt; $ reljct2        &lt;chr&gt; "Entrance/Exit Ramp Related", "Intersection", "Intersec…</span></span>
<span><span class="co">#&gt; $ rest_mis       &lt;chr&gt; "No Indication of Mis-Use", "No Indication of Mis-Use",…</span></span>
<span><span class="co">#&gt; $ rest_use       &lt;chr&gt; "Shoulder and Lap Belt Used", "Shoulder and Lap Belt Us…</span></span>
<span><span class="co">#&gt; $ rolinloc       &lt;chr&gt; "On Median/Separator", "No Rollover", "No Rollover", "N…</span></span>
<span><span class="co">#&gt; $ rollover       &lt;chr&gt; "Rollover, Tripped by Object/Vehicle", "No Rollover", "…</span></span>
<span><span class="co">#&gt; $ sch_bus        &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No", "…</span></span>
<span><span class="co">#&gt; $ seat_pos       &lt;chr&gt; "Front Seat, Left Side", "Front Seat, Left Side", "Fron…</span></span>
<span><span class="co">#&gt; $ sex            &lt;chr&gt; "Male", "Male", "Male", "Male", "Male", "Female", "Male…</span></span>
<span><span class="co">#&gt; $ spec_use       &lt;chr&gt; "No Special Use", "No Special Use", "No Special Use", "…</span></span>
<span><span class="co">#&gt; $ speedrel       &lt;chr&gt; "Yes, Too Fast for Conditions", "No", "No", "No", "No",…</span></span>
<span><span class="co">#&gt; $ str_veh        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0…</span></span>
<span><span class="co">#&gt; $ tow_veh        &lt;chr&gt; "No Trailing Units", "No Trailing Units", "No Trailing …</span></span>
<span><span class="co">#&gt; $ towed          &lt;chr&gt; "Towed Due to Disabling Damage", "Towed Not Due to Disa…</span></span>
<span><span class="co">#&gt; $ trav_sp        &lt;chr&gt; "Not Reported", "Not Reported", "Not Reported", "Not Re…</span></span>
<span><span class="co">#&gt; $ typ_int        &lt;chr&gt; "Not an Intersection", "Four-Way Intersection", "Four-W…</span></span>
<span><span class="co">#&gt; $ unittype       &lt;chr&gt; "Motor Vehicle In-Transport (Inside or Outside the Traf…</span></span>
<span><span class="co">#&gt; $ urbanicity     &lt;chr&gt; "Rural Area", "Rural Area", "Rural Area", "Rural Area",…</span></span>
<span><span class="co">#&gt; $ v_config       &lt;chr&gt; "Not Applicable", "Not Applicable", "Not Applicable", "…</span></span>
<span><span class="co">#&gt; $ valign         &lt;chr&gt; "Curve - Right", "Straight", "Straight", "Straight", "S…</span></span>
<span><span class="co">#&gt; $ ve_forms       &lt;dbl&gt; 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 1, 1, 2, 2…</span></span>
<span><span class="co">#&gt; $ ve_total       &lt;dbl&gt; 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 1, 1, 2, 2…</span></span>
<span><span class="co">#&gt; $ veh_alch       &lt;chr&gt; "No Alcohol Involved", "No Alcohol Involved", "No Alcoh…</span></span>
<span><span class="co">#&gt; $ vnum_lan       &lt;chr&gt; "Not Reported", "Six lanes", "Six lanes", "Six lanes", …</span></span>
<span><span class="co">#&gt; $ vprofile       &lt;chr&gt; "Level", "Grade, Unknown Slope", "Grade, Unknown Slope"…</span></span>
<span><span class="co">#&gt; $ vspd_lim       &lt;chr&gt; "35 MPH", "40 MPH", "40 MPH", "40 MPH", "40 MPH", "Not …</span></span>
<span><span class="co">#&gt; $ vsurcond       &lt;chr&gt; "Wet", "Dry", "Dry", "Dry", "Dry", "Dry", "Dry", "Dry",…</span></span>
<span><span class="co">#&gt; $ vtcont_f       &lt;chr&gt; "Device Functioning Properly", "Device Functioning Prop…</span></span>
<span><span class="co">#&gt; $ vtrafcon       &lt;chr&gt; "Yield Sign", "Flashing Traffic Control Signal", "Flash…</span></span>
<span><span class="co">#&gt; $ vtrafway       &lt;chr&gt; "Entrance/Exit Ramp", "Two-Way, Not Divided", "Two-Way,…</span></span>
<span><span class="co">#&gt; $ wrk_zone       &lt;chr&gt; "None", "None", "None", "None", "None", "None", "None",…</span></span>
<span><span class="co">#&gt; $ gvwr_from      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ gvwr_to        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ ic_final_body  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ icfinalbody    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ reljct1_im     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ trlr1gvwr      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ trlr2gvwr      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ trlr3gvwr      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ v_picbodyclass &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ v_picmake      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ v_picmodel     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ vpicbodyclass  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ vpicmake       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ vpicmodel      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ underoverride  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span></code></pre></div>
<p>The <code>multi_</code> tibbles contain those variables for which there may be a varying number of values for any entity (e.g., driver impairments, vehicle events, weather conditions at time of crash). Each tibble has the requisite data elements corresponding to the entity: <code>multi_acc</code> includes <code>st_case</code> and <code>year</code>, <code>multi_veh</code> adds <code>veh_no</code> (vehicle number), and <code>multi_per</code> adds <code>per_no</code> (person number).</p>
<p>The top three name-value pairs of each tibble are shown below.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myGESCRSS</span><span class="op">$</span><span class="va">multi_acc</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rank</span><span class="op">&lt;=</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">rank</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'name'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span><span class="co">#&gt; # A tibble: 44 × 3</span></span>
<span><span class="co">#&gt; # Groups:   name [15]</span></span>
<span><span class="co">#&gt;    name    value                                                               n</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;                                                           &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 cf1     Motor Vehicle struck by falling cargo,or something that came l…   540</span></span>
<span><span class="co">#&gt;  2 cf1     Regular Congestion                                                433</span></span>
<span><span class="co">#&gt;  3 cf1     Non-occupant struck vehicle                                       255</span></span>
<span><span class="co">#&gt;  4 cf2     Indication of a Stalled/Disabled Vehicle                           47</span></span>
<span><span class="co">#&gt;  5 cf2     Recent/Previous Crash scene Nearby                                 24</span></span>
<span><span class="co">#&gt;  6 cf2     Motor Vehicle struck by falling cargo,or something that came l…    15</span></span>
<span><span class="co">#&gt;  7 cf3     Reported as Unknown                                                 7</span></span>
<span><span class="co">#&gt;  8 cf3     Backup Due to Prior Crash                                           1</span></span>
<span><span class="co">#&gt;  9 cf3     Indication of a Stalled/Disabled Vehicle                            1</span></span>
<span><span class="co">#&gt; 10 crashrf Motor Vehicle struck by falling cargo,or something that came l…  1290</span></span>
<span><span class="co">#&gt; # … with 34 more rows</span></span>
<span></span>
<span><span class="va">myGESCRSS</span><span class="op">$</span><span class="va">multi_veh</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rank</span><span class="op">&lt;=</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">rank</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'name'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span><span class="co">#&gt; # A tibble: 62 × 3</span></span>
<span><span class="co">#&gt; # Groups:   name [21]</span></span>
<span><span class="co">#&gt;    name   value                                                                n</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                                                            &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 damage 12 Clock Value                                                   98421</span></span>
<span><span class="co">#&gt;  2 damage 6 Clock Value                                                    42402</span></span>
<span><span class="co">#&gt;  3 damage 11 Clock Value                                                   39565</span></span>
<span><span class="co">#&gt;  4 dr_sf1 Careless Driving                                                  7341</span></span>
<span><span class="co">#&gt;  5 dr_sf1 Looked But Did Not See                                            1313</span></span>
<span><span class="co">#&gt;  6 dr_sf1 Reported as Unknown                                               1072</span></span>
<span><span class="co">#&gt;  7 dr_sf2 Operating the Vehicle in an Erratic, Reckless or Negligent Mann…  1966</span></span>
<span><span class="co">#&gt;  8 dr_sf2 Reported as Unknown                                               1072</span></span>
<span><span class="co">#&gt;  9 dr_sf2 Careless Driving                                                   226</span></span>
<span><span class="co">#&gt; 10 dr_sf3 Reported as Unknown                                               1072</span></span>
<span><span class="co">#&gt; # … with 52 more rows</span></span>
<span></span>
<span><span class="va">myGESCRSS</span><span class="op">$</span><span class="va">multi_per</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rank</span><span class="op">&lt;=</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">rank</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'name'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span><span class="co">#&gt; # A tibble: 29 × 3</span></span>
<span><span class="co">#&gt; # Groups:   name [10]</span></span>
<span><span class="co">#&gt;    name     value                                                              n</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;                                                          &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 mnmdstrd Not Distracted                                                  1650</span></span>
<span><span class="co">#&gt;  2 mnmdstrd Inattention (Inattentive), Details Unknown                       124</span></span>
<span><span class="co">#&gt;  3 mnmdstrd Reported as Unknown if Distracted                                 73</span></span>
<span><span class="co">#&gt;  4 mpr_act  Crossing Roadway                                                3421</span></span>
<span><span class="co">#&gt;  5 mpr_act  Movement Along Roadway with Traffic (In or Adjacent to Travel…   565</span></span>
<span><span class="co">#&gt;  6 mpr_act  In Roadway - Other (Working, Playing, Etc.)                      229</span></span>
<span><span class="co">#&gt;  7 mtm_crsh None Noted                                                      2621</span></span>
<span><span class="co">#&gt;  8 mtm_crsh Failure to Yield Right-Of-Way                                   1145</span></span>
<span><span class="co">#&gt;  9 mtm_crsh Improper Crossing of Roadway or Intersection (Jaywalking)        383</span></span>
<span><span class="co">#&gt; 10 nmaction Crossing Roadway                                                6886</span></span>
<span><span class="co">#&gt; # … with 19 more rows</span></span></code></pre></div>
<p>The <code>events</code> tibble provides a sequence of numbered events for each vehicle in each crash.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">myGESCRSS</span><span class="op">$</span><span class="va">events</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;         casenum veh_no               aoi                        soe veventnum</span></span>
<span><span class="co">#&gt; 1  201901174219      1 Non-Harmful Event     Ran Off Roadway - Left         1</span></span>
<span><span class="co">#&gt; 2  201901174219      1     3 Clock Point                       Curb         2</span></span>
<span><span class="co">#&gt; 3  201901174219      1     Non-Collision          Rollover/Overturn         3</span></span>
<span><span class="co">#&gt; 4  201901176655      1             Right Motor Vehicle In-Transport         1</span></span>
<span><span class="co">#&gt; 5  201901176655      2    12 Clock Point Motor Vehicle In-Transport         1</span></span>
<span><span class="co">#&gt; 6  201901176667      1    12 Clock Point Motor Vehicle In-Transport         1</span></span>
<span><span class="co">#&gt; 7  201901176667      2     4 Clock Point Motor Vehicle In-Transport         1</span></span>
<span><span class="co">#&gt; 8  201901176694      1 Non-Harmful Event              End Departure         1</span></span>
<span><span class="co">#&gt; 9  201901176694      1    12 Clock Point       Traffic Sign Support         2</span></span>
<span><span class="co">#&gt; 10 201901176694      1    12 Clock Point       Tree (Standing Only)         3</span></span>
<span><span class="co">#&gt;    year</span></span>
<span><span class="co">#&gt; 1  2019</span></span>
<span><span class="co">#&gt; 2  2019</span></span>
<span><span class="co">#&gt; 3  2019</span></span>
<span><span class="co">#&gt; 4  2019</span></span>
<span><span class="co">#&gt; 5  2019</span></span>
<span><span class="co">#&gt; 6  2019</span></span>
<span><span class="co">#&gt; 7  2019</span></span>
<span><span class="co">#&gt; 8  2019</span></span>
<span><span class="co">#&gt; 9  2019</span></span>
<span><span class="co">#&gt; 10 2019</span></span></code></pre></div>
<p>The <code>codebook</code> tibble provides a searchable codebook for the data, useful if you know what concept you’re looking for but not the variable that describes it.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View(myGESCRSS$codebook)</span></span>
<span></span>
<span><span class="va">myGESCRSS</span><span class="op">$</span><span class="va">codebook</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name_rfars</span> <span class="op">==</span> <span class="st">"lgt_cond"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;     source year     file name_ncsa name_rfars           label value</span></span>
<span><span class="co">#&gt; 1  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     1</span></span>
<span><span class="co">#&gt; 2  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     2</span></span>
<span><span class="co">#&gt; 3  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     3</span></span>
<span><span class="co">#&gt; 4  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     4</span></span>
<span><span class="co">#&gt; 5  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     5</span></span>
<span><span class="co">#&gt; 6  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     6</span></span>
<span><span class="co">#&gt; 7  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     7</span></span>
<span><span class="co">#&gt; 8  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     8</span></span>
<span><span class="co">#&gt; 9  GESCRSS 2019 accident  LGT_COND   lgt_cond Light Condition     9</span></span>
<span><span class="co">#&gt; 10 GESCRSS 2020 accident  LGT_COND   lgt_cond Light Condition     1</span></span>
<span><span class="co">#&gt;                value_label</span></span>
<span><span class="co">#&gt; 1                 Daylight</span></span>
<span><span class="co">#&gt; 2       Dark - Not Lighted</span></span>
<span><span class="co">#&gt; 3           Dark - Lighted</span></span>
<span><span class="co">#&gt; 4                     Dawn</span></span>
<span><span class="co">#&gt; 5                     Dusk</span></span>
<span><span class="co">#&gt; 6  Dark - Unknown Lighting</span></span>
<span><span class="co">#&gt; 7                    Other</span></span>
<span><span class="co">#&gt; 8             Not Reported</span></span>
<span><span class="co">#&gt; 9      Reported as Unknown</span></span>
<span><span class="co">#&gt; 10                Daylight</span></span></code></pre></div>
<div class="section level3">
<h3 id="counts-1">Counts<a class="anchor" aria-label="anchor" href="#counts-1"></a>
</h3>
<p>A first step in many transportation safety analyses involves counting the number of relevant crashes, fatalities, or people involved. <code><a href="reference/counts.html">counts()</a></code> lets users specify <em>what</em> to count, <em>where</em> to count them (rural/urban and/or in specified states or regions), <em>who</em> to include, which <em>years</em> and an aggregation <em>interval</em> (annually or monthly), and factors <em>involved</em> in the crash. It returns a simple tibble that can be easily piped into <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code> to quickly visualize counts.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span></span>
<span>  <span class="va">myGESCRSS</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"crashes"</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_counts</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 8</span></span>
<span><span class="co">#&gt; # Groups:   year [3]</span></span>
<span><span class="co">#&gt;    year date              n what    states region urb   who  </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;date&gt;        &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1  2019 2019-01-01 6755841. crashes all    all    all   all  </span></span>
<span><span class="co">#&gt; 2  2020 2020-01-01 5250837. crashes all    all    all   all  </span></span>
<span><span class="co">#&gt; 3  2021 2021-01-01 6102936. crashes all    all    all   all</span></span>
<span></span>
<span><span class="va">my_counts</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">n</span>, label<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Total Estimated Crashes"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-24-1.png" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/counts.html">counts</a></span><span class="op">(</span></span>
<span>  <span class="va">myGESCRSS</span>,</span>
<span>  where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region<span class="op">=</span><span class="st">"s"</span><span class="op">)</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"injuries"</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">n</span>, label<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Injuries in the South"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-25-1.png" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/compare_counts.html">compare_counts</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">myGESCRSS</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"injuries"</span>,</span>
<span>  where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region<span class="op">=</span><span class="st">"s"</span><span class="op">)</span>,</span>
<span>  where2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region<span class="op">=</span><span class="st">"ne"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">n</span>, label<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">.</span><span class="op">~</span><span class="va">region</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Injuries in the South and Northeast"</span>, fill<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-26-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="mapping-1">Mapping<a class="anchor" aria-label="anchor" href="#mapping-1"></a>
</h3>
<p>GES/CRSS is not very friendly to mapping. It does not provide lat/lon coordinates or States. Regions are composed of several States and require extra steps to generate mappable data.</p>
</div>
<div class="section level3">
<h3 id="modeling-1">Modeling<a class="anchor" aria-label="anchor" href="#modeling-1"></a>
</h3>
<p>Having access to the full dataset also allows us to develop statistical models. Here we fit a simple model of injury severity as a function of age and restraint use. The results indicate that injury severity increases with age, and when seat belts are not used properly.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># table(myFARS$flat$inj_sev)</span></span>
<span><span class="co"># table(myFARS$flat$rest_use, useNA = "ifany")</span></span>
<span><span class="co"># table(myFARS$flat$per_typ, useNA = "ifany")</span></span>
<span></span>
<span><span class="va">model_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">myGESCRSS</span><span class="op">$</span><span class="va">flat</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rest_use</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lap Belt Only Used"</span>,</span>
<span>                         <span class="st">"Shoulder Belt Only Used"</span>,</span>
<span>                         <span class="st">"None Used / Not Applicable"</span>,</span>
<span>                         <span class="st">"None Used/Not Applicable"</span>,</span>
<span>                         <span class="st">"Shoulder and Lap Belt Used"</span><span class="op">)</span>,</span>
<span>         <span class="va">per_typ</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Driver of a Motor Vehicle In-Transport"</span>,</span>
<span>                        <span class="st">"Passenger of a Motor Vehicle In-Transport"</span><span class="op">)</span></span>
<span>         <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    rest_use <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">rest_use</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lap Belt Only Used"</span>, <span class="st">"Shoulder Belt Only Used"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Partial"</span>,</span>
<span>      <span class="va">rest_use</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None Used / Not Applicable"</span>, <span class="st">"None Used/Not Applicable"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"None"</span>,</span>
<span>      <span class="va">rest_use</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Shoulder and Lap Belt Used"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Full"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Unknown"</span></span>
<span>      <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/stats/relevel.html" class="external-link">relevel</a></span><span class="op">(</span>ref <span class="op">=</span> <span class="st">"Full"</span><span class="op">)</span>,</span>
<span>    kabco <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">inj_sev</span> <span class="op">==</span> <span class="st">"Fatal Injury (K)"</span> <span class="op">~</span> <span class="fl">4</span>,</span>
<span>      <span class="va">inj_sev</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Suspected Serious Injury (A)"</span>, </span>
<span>                     <span class="st">"Suspected Serious Injury(A)"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">3</span>,</span>
<span>      <span class="va">inj_sev</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Suspected Minor Injury (B)"</span>, </span>
<span>                     <span class="st">"Suspected Minor Injury(B)"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>      <span class="va">inj_sev</span> <span class="op">==</span> <span class="st">"Possible Injury (C)"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">inj_sev</span> <span class="op">==</span> <span class="st">"No Apparent Injury (O)"</span> <span class="op">~</span> <span class="fl">0</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    age_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\D+"</span>,<span class="st">""</span>, <span class="va">age</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    speed_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\D+"</span>,<span class="st">""</span>, <span class="va">trav_sp</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span> </span>
<span></span>
<span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">kabco</span> <span class="op">~</span> <span class="va">age_n</span> <span class="op">+</span> <span class="va">rest_use</span> <span class="op">+</span> <span class="va">speed_n</span>, data <span class="op">=</span> <span class="va">model_data</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu">stargazer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/stargazer/man/stargazer.html" class="external-link">stargazer</a></span><span class="op">(</span><span class="va">my_model</span>, type <span class="op">=</span> <span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table style="text-align:center" class="table">
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="1" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
kabco
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
age_n
</td>
<td>
0.003<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.0001)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
rest_useNone
</td>
<td>
1.320<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.009)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
rest_usePartial
</td>
<td>
0.075<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.022)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
speed_n
</td>
<td>
0.010<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.0001)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
0.030<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.007)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
122,164
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.199
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.199
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
0.846 (df = 122159)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
7,592.222<sup>***</sup> (df = 4; 122159)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td style="text-align:right">
<sup><em></em></sup>p&lt;0.1; <sup><strong></strong></sup>p&lt;0.05; <sup></sup>p&lt;0.01
</td>
</tr>
</table>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>  age_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>  speed_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">60</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  rest_use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Full"</span>, <span class="st">"Partial"</span>, <span class="st">"None"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Full"</span>, <span class="st">"Partial"</span>, <span class="st">"None"</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">new_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">my_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span>,</span>
<span>         age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">age_n</span>, <span class="st">" yrs"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">speed_n</span>, y<span class="op">=</span><span class="va">pred</span>, fill<span class="op">=</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">.</span><span class="op">~</span><span class="va">rest_use</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span>
<span>      limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">4</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">4</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"O"</span>, <span class="st">"C"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"K"</span><span class="op">)</span>, expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>          panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"Travel Speed (mph)"</span>, y<span class="op">=</span><span class="st">""</span>, title <span class="op">=</span> <span class="st">"Predicted Injury Severity by Age, Restraint Use, and Travel Speed"</span>,</span>
<span>         fill<span class="op">=</span><span class="st">"Age"</span>,</span>
<span>         caption <span class="op">=</span> <span class="st">"Full = correctly used seatbelt, partial = partially correctly used, none = no seatbelt."</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-28-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rfars" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/s87jackson/rfars/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/s87jackson/rfars/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>CC0</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rfars</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Steve Jackson <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3337-7846" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=rfars" class="external-link"><img src="https://www.r-pkg.org/badges/version/rfars" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://github.com/s87jackson/rfars/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/s87jackson/rfars/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R CMD Check"></a></li>
<li><a href="https://CRAN.R-project.org/package=rfars" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/rfars"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Steve Jackson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
